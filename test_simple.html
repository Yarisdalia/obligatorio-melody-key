<!DOCTYPE html>
<html>
<head>
    <title>Test Melody Key</title>
</head>
<body>
    <h1>Test del Sistema</h1>
    <div id="resultado"></div>
    
    <script src="clases/cliente.js"></script>
    <script src="clases/administrador.js"></script>
    <script src="clases/concierto.js"></script>
    <script src="clases/reserva.js"></script>
    <script src="utils/validaciones-contrasena.js"></script>
    <script src="utils/ids.js"></script>
    <script src="utils/libreria.js"></script>
    <script src="sistema.js"></script>
    
    <script>
        var system = new Sistema();
        var resultado = "";
        
        // Test F01 - Registro
        resultado += "F01 - Registro: ";
        var msg1 = system.agregarUsuario("Juan", "Perez", "juanp", "Pass1234", "Pass1234");
        resultado += (msg1 === "Registro exitoso." ? "✅" : "❌") + "<br>";
        
        // Test F02 - Login
        resultado += "F02 - Login: ";
        var msg2 = system.iniciarSesion("juanp", "Pass1234");
        resultado += (msg2.startsWith("Bienvenido") ? "✅" : "❌") + "<br>";
        
        // Test F08 - Agregar concierto
        resultado += "F08 - Agregar Concierto: ";
        system.agregarConcierto("Test Concert", "Artista", 1000, "Desc", "img.jpg", 50, "activo", false);
        resultado += (system.conciertos.length > 0 ? "✅" : "❌") + "<br>";
        
        // Test F03 - Explorar
        resultado += "F03 - Explorar: ";
        var disponibles = system.explorarConciertosDisponibles();
        resultado += (disponibles.length > 0 ? "✅" : "❌") + "<br>";
        
        // Test F04 - Reservar
        resultado += "F04 - Reservar: ";
        var res = system.solicitarReserva(system.clientes[0].id, system.conciertos[0].id, 5);
        resultado += (res.exito && res.mensaje === "Reserva pendiente de confirmación." ? "✅" : "❌") + "<br>";
        
        // Test F05 - Historial
        resultado += "F05 - Historial: ";
        var historial = system.listarReservasCliente(system.clientes[0].id);
        resultado += (historial.length > 0 ? "✅" : "❌") + "<br>";
        
        // Test descuento
        resultado += "Descuento 10% (5 entradas): ";
        var monto = system.reservas[0].montoConDescuento();
        var esperado = 1000 * 5 * 0.9; // 4500
        resultado += (monto === esperado ? "✅" : "❌") + "<br>";
        
        document.getElementById("resultado").innerHTML = resultado;
    </script>
</body>
</html>
