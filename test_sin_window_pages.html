<!DOCTYPE html>
<html>
<head>
    <title>Test Sin window.pages - Melody Key</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        .ok { color: green; font-weight: bold; }
        .test { margin: 10px 0; padding: 10px; background: #f0f0f0; }
    </style>
</head>
<body>
    <h1>Test: Sistema Sin window.pages</h1>
    <div id="resultados"></div>
    
    <script src="clases/cliente.js"></script>
    <script src="clases/administrador.js"></script>
    <script src="clases/concierto.js"></script>
    <script src="clases/reserva.js"></script>
    <script src="utils/validaciones-contrasena.js"></script>
    <script src="utils/ids.js"></script>
    <script src="utils/libreria.js"></script>
    <script src="utils/tipo-de-usuario.js"></script>
    <script src="sistema.js"></script>
    
    <script>
        var system = new Sistema();
        var html = "";
        
        html += "<h2>✅ Verificación de Funciones Globales</h2>";
        
        // Test 1: Funciones existen globalmente (sin window.pages)
        html += "<div class='test'>";
        html += "<strong>Test 1: Funciones Globales</strong><br>";
        html += "renderExplorar existe: " + (typeof renderExplorar === "function" ? "❌ NO (correcto, se carga después)" : "⏳ Pendiente") + "<br>";
        html += "renderHistorial existe: " + (typeof renderHistorial === "function" ? "❌ NO (correcto, se carga después)" : "⏳ Pendiente") + "<br>";
        html += "renderOfertas existe: " + (typeof renderOfertas === "function" ? "❌ NO (correcto, se carga después)" : "⏳ Pendiente") + "<br>";
        html += "<em>Nota: Las funciones se cargarán cuando se incluyan los archivos de paginas/*.js en el HTML</em>";
        html += "</div>";
        
        // Test 2: Sistema básico funciona
        html += "<div class='test'>";
        html += "<strong>Test 2: Sistema Básico</strong><br>";
        system.agregarUsuario("Test", "User", "test1", "Pass1234", "Pass1234");
        html += "Usuario creado: ✅<br>";
        html += "Total clientes: " + system.clientes.length + " ✅<br>";
        html += "</div>";
        
        // Test 3: Login funciona
        html += "<div class='test'>";
        html += "<strong>Test 3: Login</strong><br>";
        var msg = system.iniciarSesion("test1", "Pass1234");
        html += "Mensaje: " + msg + "<br>";
        html += "Usuario logueado: " + (system.usuarioLogueado ? "✅" : "❌") + "<br>";
        html += "</div>";
        
        // Test 4: No hay window.pages
        html += "<div class='test'>";
        html += "<strong>Test 4: Sin window.pages</strong><br>";
        html += "window.pages existe: " + (typeof window.pages !== "undefined" ? "❌ SÍ (malo)" : "✅ NO (correcto)") + "<br>";
        html += "<span class='ok'>✅ Código limpio sin window.pages</span>";
        html += "</div>";
        
        html += "<h2 class='ok'>✅ Sistema funciona correctamente sin window.pages!</h2>";
        html += "<p><strong>Ventajas:</strong></p>";
        html += "<ul>";
        html += "<li>✅ Funciones globales simples</li>";
        html += "<li>✅ Fácil de entender para estudiantes</li>";
        html += "<li>✅ Sin complejidad innecesaria</li>";
        html += "<li>✅ Código más limpio</li>";
        html += "</ul>";
        
        document.getElementById("resultados").innerHTML = html;
    </script>
</body>
</html>
